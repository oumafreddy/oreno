{% extends 'reports/base_report.html' %}
{% block content %}
<div class="report-container">
  <div class="report-header">
    <div class="header-content">
      <h1 class="report-title">Contract Register Summary</h1>
      <div class="header-meta">
        <span><strong>Organization:</strong> {{ organization.name }}</span>
        <span><strong>Generated:</strong> {{ generation_timestamp }}</span>
      </div>
    </div>
  </div>

  <div class="table-container">
    <table class="report-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Status</th>
          <th>Type</th>
          <th>Parties</th>
          <th>Start</th>
          <th>Expiry</th>
          <th>Value</th>
        </tr>
      </thead>
      <tbody>
        {% for c in contracts %}
        <tr>
          <td>{{ c.contract_id }}</td>
          <td>{{ c.title|striptags }}</td>
          <td><span class="status-badge status-{{ c.status }}">{{ c.get_status_display }}</span></td>
          <td>{{ c.contract_type.name|default:'-' }}</td>
          <td>{% for p in c.parties.all %}{{ p.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
          <td>{{ c.start_date|date:"M j, Y" }}</td>
          <td>{{ c.end_date|date:"M j, Y" }}</td>
          <td>{{ c.value|floatformat:2 }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="8" class="no-data">No contracts found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}