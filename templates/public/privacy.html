{% extends 'public/base.html' %}
{% load static %}

{% block title %}Privacy Policy | Hashrate Solutions{% endblock %}

{% block extra_js %}
<script nonce="{{ request.csp_nonce }}">
// Hash PII client-side and send to TikTok if present
(function() {
    function toHex(buffer) {
        var bytes = new Uint8Array(buffer);
        var hex = '';
        for (var i = 0; i < bytes.length; i++) {
            var h = bytes[i].toString(16);
            if (h.length === 1) h = '0' + h;
            hex += h;
        }
        return hex;
    }

    function sha256Hex(text) {
        if (!text) return Promise.resolve('');
        var normalized = String(text).trim().toLowerCase();
        var data = new TextEncoder().encode(normalized);
        return crypto.subtle.digest('SHA-256', data).then(toHex);
    }

    var rawEmail = "{{ user.email|default_if_none:''|default:''|escapejs }}";
    var rawPhone = "{{ pii_phone|default_if_none:''|default:''|escapejs }}";
    var rawExternalId = "{{ pii_external_id|default_if_none:''|default:''|escapejs }}";

    Promise.all([sha256Hex(rawEmail), sha256Hex(rawPhone), sha256Hex(rawExternalId)])
        .then(function([hashedEmail, hashedPhone, hashedExternalId]) {
            if (typeof ttq === 'undefined') return;
            var payload = {};
            if (hashedEmail) payload.email = hashedEmail;
            if (hashedPhone) payload.phone_number = hashedPhone;
            if (hashedExternalId) payload.external_id = hashedExternalId;
            if (Object.keys(payload).length > 0) {
                ttq.identify(payload);
            }
        })
        .catch(function() { /* intentionally silent */ });
})();
</script>
{% endblock %}

{% block content %}
<section class="privacy-section animate-on-scroll" style="padding: var(--space-24) 0; background: var(--bg-secondary);">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h1 class="section-title fade-in">Privacy Policy</h1>
            <p class="section-subtitle fade-in">Last updated: June 23, 2025</p>
        </div>
        
        <div class="privacy-content fade-in" style="max-width: 800px; margin: 0 auto; line-height: 1.8; background: var(--white); padding: var(--space-8); border-radius: var(--radius-xl); box-shadow: var(--shadow-lg);">
            <div class="mb-4">
                <h2>1. Introduction</h2>
                <p>Welcome to Hashrate Solutions. We are committed to protecting your personal information and your right to privacy. If you have any questions or concerns about this privacy notice or our practices with regard to your personal information, please contact us at info@oreno.tech.</p>
            </div>

            <div class="mb-4">
                <h2>2. Information We Collect</h2>
                <p>We collect personal information that you voluntarily provide to us when you express an interest in obtaining information about us or our products and services, when you participate in activities on the website, or otherwise when you contact us.</p>
                <p>The personal information we collect may include the following:</p>
                <ul>
                    <li>Name and contact data (e.g., email address, phone number)</li>
                    <li>Company information (e.g., name, size, location)</li>
                    <li>Any other information you choose to provide</li>
                </ul>
            </div>

            <div class="mb-4">
                <h2>3. How We Use Your Information</h2>
                <p>We use personal information collected via our website for a variety of business purposes described below:</p>
                <ul>
                    <li>To send you marketing and promotional communications</li>
                    <li>To respond to user inquiries/offer support to users</li>
                    <li>For other business purposes, such as data analysis, identifying usage trends, and evaluating and improving our website, products, and services</li>
                </ul>
            </div>

            <div class="mb-4">
                <h2>4. Will Your Information Be Shared With Anyone?</h2>
                <p>We only share information with your consent, to comply with laws, to provide you with services, to protect your rights, or to fulfill business obligations.</p>
            </div>

            <div class="mb-4">
                <h2>5. How Long Do We Keep Your Information?</h2>
                <p>We will only keep your personal information for as long as it is necessary for the purposes set out in this privacy notice, unless a longer retention period is required or permitted by law.</p>
            </div>

            <div class="mb-4">
                <h2>6. How Do We Keep Your Information Safe?</h2>
                <p>We have implemented appropriate technical and organizational security measures designed to protect the security of any personal information we process.</p>
            </div>

            <div class="mb-4">
                <h2>7. Your Privacy Rights</h2>
                <p>You may review, change, or terminate your account at any time. Depending on your location, you may have certain rights regarding your personal information.</p>
            </div>

            <div class="mb-4">
                <h2>8. Updates To This Policy</h2>
                <p>We may update this privacy notice from time to time. The updated version will be indicated by an updated "Revised" date and the updated version will be effective as soon as it is accessible.</p>
            </div>

            <div class="mb-4">
                <h2>9. Contact Us</h2>
                <p>If you have questions or comments about this policy, you may email us at info@oreno.tech or by post to:</p>
                <address>
                    Hashrate Solutions<br>
                    Nairobi, Kenya<br>
                    +254 711 219 536
                </address>
            </div>
        </div>
    </div>
</section>

<style>
    .privacy-content h2 {
        color: #2c3e50;
        margin: 2rem 0 1rem;
        font-size: 1.5rem;
    }
    
    .privacy-content p, .privacy-content li {
        color: #555;
        margin-bottom: 0.8rem;
    }
    
    .privacy-content ul {
        padding-left: 1.5rem;
        margin: 1rem 0;
    }
    
    .privacy-content li {
        margin-bottom: 0.5rem;
    }
    
    address {
        font-style: normal;
        margin: 1rem 0;
        line-height: 1.6;
    }
    
    @media (max-width: 768px) {
        .privacy-content h2 {
            font-size: 1.3rem;
        }
        
        .privacy-content {
            padding: 0 1rem;
        }
    }

    .privacy-section { background: #fff; }
    .privacy-bg {
        position: absolute;
        z-index: 0;
        pointer-events: none;
        user-select: none;
        opacity: 0.11;
        transition: opacity 0.3s;
    }
    .decor-e-topleft {
        top: -60px;
        left: -80px;
        width: 220px;
        transform: rotate(-12deg);
        opacity: 0.13;
    }
    .decor-d-topright {
        top: -50px;
        right: -70px;
        width: 180px;
        transform: rotate(10deg) scaleX(-1);
        opacity: 0.12;
    }
    .decor-e-bottomleft {
        bottom: -40px;
        left: -60px;
        width: 180px;
        transform: rotate(-18deg);
        opacity: 0.09;
    }
    .decor-d-bottomright {
        bottom: -30px;
        right: 2vw;
        width: 120px;
        transform: rotate(8deg) scaleX(-1);
        opacity: 0.08;
    }
    @media (max-width: 900px) {
        .privacy-bg {
            width: 60px !important;
            left: -10px !important;
            right: -10px !important;
            opacity: 0.06 !important;
        }
    }
    @media (max-width: 600px) {
        .privacy-bg {
            width: 36px !important;
            left: 0 !important;
            right: 0 !important;
            opacity: 0.04 !important;
        }
    }
</style>
{% endblock %}
