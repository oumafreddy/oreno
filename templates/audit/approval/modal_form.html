<!-- Modal Form Template for Approval Requests -->
<div class="modal-header">
  <h5 class="modal-title">{% if form.instance.pk %}Edit Approval Request{% else %}New Approval Request{% endif %}</h5>
  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
  <form id="approval-form" hx-post="{{ request.path }}" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}' class="needs-validation" novalidate>
    {% csrf_token %}
    
    <div class="mb-3">
      <label for="id_approver" class="form-label">Approver</label>
      {{ form.approver }}
      {% if form.approver.errors %}
        <div class="invalid-feedback d-block">
          {{ form.approver.errors }}
        </div>
      {% endif %}
      <div class="form-text">Select the person who should approve this item.</div>
    </div>
    
    <div class="mb-3">
      <label for="id_content_type" class="form-label">Content Type</label>
      {{ form.content_type }}
      {% if form.content_type.errors %}
        <div class="invalid-feedback d-block">
          {{ form.content_type.errors }}
        </div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      <label for="id_object_id" class="form-label">Object ID</label>
      {{ form.object_id }}
      {% if form.object_id.errors %}
        <div class="invalid-feedback d-block">
          {{ form.object_id.errors }}
        </div>
      {% endif %}
    </div>
    
    <div class="mb-3">
      <label for="id_approval_type" class="form-label">Approval Type</label>
      {{ form.approval_type }}
      {% if form.approval_type.errors %}
        <div class="invalid-feedback d-block">
          {{ form.approval_type.errors }}
        </div>
      {% endif %}
      <div class="form-text">Select the type of approval required.</div>
    </div>
    
    <div class="mb-3">
      <label for="id_due_date" class="form-label">Due Date (Optional)</label>
      {{ form.due_date }}
      {% if form.due_date.errors %}
        <div class="invalid-feedback d-block">
          {{ form.due_date.errors }}
        </div>
      {% endif %}
      <div class="form-text">When does this approval need to be completed by?</div>
    </div>
    
    <div class="mb-3">
      <label for="id_comments" class="form-label">Comments</label>
      {{ form.comments }}
      {% if form.comments.errors %}
        <div class="invalid-feedback d-block">
          {{ form.comments.errors }}
        </div>
      {% endif %}
      <div class="form-text">Provide any additional context or instructions for the approver.</div>
    </div>
  </form>
</div>

<div class="modal-footer">
  <div class="loading-spinner spinner-border text-primary d-none" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
  <button type="button" class="btn btn-primary" onclick="submitModalForm('approval-form')">
    {% if form.instance.pk %}Update{% else %}Submit{% endif %}
  </button>
</div>
