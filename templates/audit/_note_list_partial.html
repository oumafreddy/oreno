{% load limited_html %}
{% if content_type_id and object_id %}
  <div class="mb-2 text-end">
    <button class="btn btn-info btn-sm" hx-get="{% url 'audit:note-modal-add' content_type_id=content_type_id object_id=object_id %}" hx-target="#modal-body" data-bs-toggle="modal" data-bs-target="#mainModal">
      <i class="bi bi-sticky"></i> Add Note
    </button>
  </div>
{% endif %}
<div id="note-list-container">
  <ul class="list-group list-group-flush">
    {% for note in notes %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <a href="{% url 'audit:note-detail' note.pk %}">{{ note.get_note_type_display }}</a>
        <span class="ms-3">{{ note.content|limited_html|truncatechars:60|safe }}</span>
        <a href="{% url 'audit:note-modal-edit' note.pk %}" class="btn btn-sm btn-outline-secondary ms-2">Edit</a>
        <span class="badge bg-secondary">Status: {{ note.get_status_display }}</span>
      </li>
    {% empty %}
      <li class="list-group-item text-muted">No notes found.</li>
    {% endfor %}
  </ul>
</div> 